# Migration `20201005020456-create-periods`

This migration has been generated by DestroyeerU at 10/5/2020, 2:04:56 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Periods" (
"endHour" text  NOT NULL ,"id" SERIAL,"initialHour" text  NOT NULL ,"name" text  NOT NULL ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."Schedules" ADD COLUMN "periodId" integer  NOT NULL ;

ALTER TABLE "public"."Schedules" ADD FOREIGN KEY ("periodId")REFERENCES "public"."Periods"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200924160650-tables-renamed-to-plural..20201005020456-create-periods
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Users {
   id         Int    @default(autoincrement()) @id
@@ -21,20 +21,26 @@
   user      Invites[] @relation("user")
   recipient Invites[] @relation("recipient")
 }
-model Rooms {
-  id        Int        @default(autoincrement()) @id
-  initials  String     @unique
-  available Boolean    @default(true)
-  Reserve   Reserves[]
+model Friends {
+  id Int @default(autoincrement()) @id
+
+  user1 Users @relation("user1", fields: [userId1], references: [id])
+  user2 Users @relation("user2", fields: [userId2], references: [id])
+
+  userId1 Int
+  userId2 Int
 }
-model Schedules {
-  id          Int        @default(autoincrement()) @id
-  initialHour String
-  endHour     String
-  Reserve     Reserves[]
+model Invites {
+  id Int @default(autoincrement()) @id
+
+  user      Users @relation("user", fields: [userId], references: [id])
+  recipient Users @relation("recipient", fields: [recipientId], references: [id])
+
+  userId      Int
+  recipientId Int
 }
 model Reserves {
   id    Int @default(autoincrement()) @id
@@ -59,23 +65,31 @@
   reserve   Reserves @relation(fields: [reserveId], references: [id])
   reserveId Int
 }
-model Friends {
-  id Int @default(autoincrement()) @id
+model Rooms {
+  id        Int        @default(autoincrement()) @id
+  initials  String     @unique
+  available Boolean    @default(true)
+  Reserve   Reserves[]
+}
-  user1 Users @relation("user1", fields: [userId1], references: [id])
-  user2 Users @relation("user2", fields: [userId2], references: [id])
+model Schedules {
+  id          Int    @default(autoincrement()) @id
+  initialHour String
+  endHour     String
-  userId1 Int
-  userId2 Int
+  period   Periods @relation(fields: [periodId], references: [id])
+  periodId Int
+
+  Reserve Reserves[]
 }
-model Invites {
+model Periods {
   id Int @default(autoincrement()) @id
-  user      Users @relation("user", fields: [userId], references: [id])
-  recipient Users @relation("recipient", fields: [recipientId], references: [id])
+  name        String
+  initialHour String
+  endHour     String
-  userId      Int
-  recipientId Int
+  Schedules Schedules[]
 }
```


