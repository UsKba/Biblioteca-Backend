# Migration `20201007040434-columns-renamed`

This migration has been generated by DestroyeerU at 10/7/2020, 4:04:34 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Invite" DROP CONSTRAINT IF EXiSTS "Invite_recipientId_fkey",
DROP CONSTRAINT IF EXiSTS "Invite_userId_fkey",
DROP COLUMN "recipientId",
DROP COLUMN "userId",
ADD COLUMN "receiverId" integer  NOT NULL ,
ADD COLUMN "senderId" integer  NOT NULL ;

ALTER TABLE "public"."Invite" ADD FOREIGN KEY ("senderId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Invite" ADD FOREIGN KEY ("receiverId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201007034508-tables-renamed-to-singular..20201007040434-columns-renamed
--- datamodel.dml
+++ datamodel.dml
@@ -3,91 +3,92 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model User {
   id         Int    @default(autoincrement()) @id
   enrollment String @unique
+  email      String @unique
   name       String
-  email      String @unique
   UserReserve UserReserve[]
-  user1 Friend[] @relation("user1")
-  user2 Friend[] @relation("user2")
+  FriendUser1 Friend[] @relation("user1")
+  FriendUser2 Friend[] @relation("user2")
-  user      Invite[] @relation("user")
-  recipient Invite[] @relation("recipient")
+  InviteSender   Invite[] @relation("sender")
+  InviteReceiver Invite[] @relation("receiver")
 }
 model Friend {
   id Int @default(autoincrement()) @id
-  user1 User @relation("user1", fields: [userId1], references: [id])
-  user2 User @relation("user2", fields: [userId2], references: [id])
+  User1 User @relation("user1", fields: [userId1], references: [id])
+  User2 User @relation("user2", fields: [userId2], references: [id])
   userId1 Int
   userId2 Int
 }
 model Invite {
   id Int @default(autoincrement()) @id
-  user      User @relation("user", fields: [userId], references: [id])
-  recipient User @relation("recipient", fields: [recipientId], references: [id])
+  UserSender   User @relation("sender", fields: [senderId], references: [id])
+  UserReceiver User @relation("receiver", fields: [receiverId], references: [id])
-  userId      Int
-  recipientId Int
+  senderId   Int
+  receiverId Int
 }
 model Reserve {
   id    Int @default(autoincrement()) @id
   day   Int
   month Int
   year  Int
-  room   Room @relation(fields: [roomId], references: [id])
-  roomId Int
+  Room     Room     @relation(fields: [roomId], references: [id])
+  Schedule Schedule @relation(fields: [scheduleId], references: [id])
-  schedule    Schedule      @relation(fields: [scheduleId], references: [id])
-  scheduleId  Int
+  roomId     Int
+  scheduleId Int
+
   UserReserve UserReserve[]
 }
 model UserReserve {
   id Int @default(autoincrement()) @id
-  user   User @relation(fields: [userId], references: [id])
-  userId Int
+  User    User    @relation(fields: [userId], references: [id])
+  Reserve Reserve @relation(fields: [reserveId], references: [id])
-  reserve   Reserve @relation(fields: [reserveId], references: [id])
+  userId    Int
   reserveId Int
 }
 model Room {
-  id        Int       @default(autoincrement()) @id
-  initials  String    @unique
-  available Boolean   @default(true)
-  Reserve   Reserve[]
+  id        Int     @default(autoincrement()) @id
+  initials  String  @unique
+  available Boolean @default(true)
+
+  Reserve Reserve[]
 }
 model Schedule {
   id          Int    @default(autoincrement()) @id
   initialHour String
   endHour     String
-  period   Period @relation(fields: [periodId], references: [id])
+  Period   Period @relation(fields: [periodId], references: [id])
   periodId Int
   Reserve Reserve[]
 }
 model Period {
-  id Int @default(autoincrement()) @id
-
+  id          Int    @default(autoincrement()) @id
   name        String
   initialHour String
   endHour     String
```


