# Migration `20210327165317-create-notice-computer`

This migration has been generated by DestroyeerU at 3/27/2021, 4:53:17 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."NoticeComputer" (
"computerId" INTEGER NOT NULL  ,"noticeId" INTEGER NOT NULL  ,"status" INTEGER NOT NULL  ,
    PRIMARY KEY ("noticeId"),FOREIGN KEY ("noticeId") REFERENCES "Notice"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("computerId") REFERENCES "Computer"("id") ON DELETE CASCADE ON UPDATE CASCADE)

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210327165237-create-notice-room..20210327165317-create-notice-computer
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 model User {
   id         Int    @id @default(autoincrement())
@@ -169,10 +169,11 @@
   identification String
   status         Int
-  local   ComputerLocal @relation(fields: [localId], references: [id])
-  localId Int
+  local          ComputerLocal    @relation(fields: [localId], references: [id])
+  localId        Int
+  NoticeComputer NoticeComputer[]
 }
 model Notice {
   id Int @id @default(autoincrement())
@@ -183,11 +184,12 @@
   createdAt DateTime @default(now())
   expiredAt DateTime
-  userCreator   User         @relation(fields: [userCreatorId], references: [id])
-  userCreatorId Int
-  NoticeRoom    NoticeRoom[]
+  userCreator    User             @relation(fields: [userCreatorId], references: [id])
+  userCreatorId  Int
+  NoticeRoom     NoticeRoom[]
+  NoticeComputer NoticeComputer[]
 }
 model NoticeRoom {
   notice   Notice @relation(fields: [noticeId], references: [id])
@@ -198,5 +200,17 @@
   status Int
   @@id([noticeId])
+}
+
+model NoticeComputer {
+  notice   Notice @relation(fields: [noticeId], references: [id])
+  noticeId Int
+
+  computer   Computer @relation(fields: [computerId], references: [id])
+  computerId Int
+
+  status Int
+
+  @@id([noticeId])
 }
```


