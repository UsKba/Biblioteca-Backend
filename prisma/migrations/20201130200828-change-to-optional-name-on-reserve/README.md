# Migration `20201130200828-change-to-optional-name-on-reserve`

This migration has been generated by kaduco19 at 11/30/2020, 8:08:29 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_Reserve" (
"adminId" INTEGER NOT NULL  ,"date" DATE NOT NULL  ,"id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,"name" TEXT   ,"roomId" INTEGER NOT NULL  ,"scheduleId" INTEGER NOT NULL  ,FOREIGN KEY ("roomId") REFERENCES "Room"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("scheduleId") REFERENCES "Schedule"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("adminId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE)

INSERT INTO "quaint"."new_Reserve" ("adminId", "date", "id", "name", "roomId", "scheduleId") SELECT "adminId", "date", "id", "name", "roomId", "scheduleId" FROM "quaint"."Reserve"

PRAGMA foreign_keys=off;
DROP TABLE "quaint"."Reserve";;
PRAGMA foreign_keys=on

ALTER TABLE "quaint"."new_Reserve" RENAME TO "Reserve";

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201129094532-add-status-on-invite..20201130200828-change-to-optional-name-on-reserve
--- datamodel.dml
+++ datamodel.dml
@@ -1,99 +1,99 @@
-generator client {
-  provider = "prisma-client-js"
-}
-
-datasource db {
-  provider = "sqlite"
-  url = "***"
-}
-
-model User {
-  id         Int    @id @default(autoincrement())
-  enrollment String @unique
-  email      String @unique
-  name       String
-
-  FriendUser1 Friend[] @relation("user1")
-  FriendUser2 Friend[] @relation("user2")
-
-  InviteSender   Invite[] @relation("sender")
-  InviteReceiver Invite[] @relation("receiver")
-
-  UserReserve UserReserve[]
-  Reserve     Reserve[]
-}
-
-model Friend {
-  id Int @id @default(autoincrement())
-
-  User1 User @relation("user1", fields: [userId1], references: [id])
-  User2 User @relation("user2", fields: [userId2], references: [id])
-
-  userId1 Int
-  userId2 Int
-}
-
-model Invite {
-  id     Int @id @default(autoincrement())
-  status Int
-
-  UserSender   User @relation("sender", fields: [senderId], references: [id])
-  UserReceiver User @relation("receiver", fields: [receiverId], references: [id])
-
-  senderId   Int
-  receiverId Int
-}
-
-model Reserve {
-  id   Int      @id @default(autoincrement())
-  name String
-  date DateTime
-
-  Room     Room     @relation(fields: [roomId], references: [id])
-  Schedule Schedule @relation(fields: [scheduleId], references: [id])
-  Admin    User     @relation(fields: [adminId], references: [id])
-
-  adminId    Int
-  roomId     Int
-  scheduleId Int
-
-  UserReserve UserReserve[]
-}
-
-model UserReserve {
-  id Int @id @default(autoincrement())
-
-  User    User    @relation(fields: [userId], references: [id])
-  Reserve Reserve @relation(fields: [reserveId], references: [id])
-
-  userId    Int
-  reserveId Int
-}
-
-model Room {
-  id        Int     @id @default(autoincrement())
-  initials  String  @unique
-  available Boolean @default(true)
-
-  Reserve Reserve[]
-}
-
-model Schedule {
-  id          Int    @id @default(autoincrement())
-  initialHour String
-  endHour     String
-
-  Period   Period @relation(fields: [periodId], references: [id])
-  periodId Int
-
-  Reserve Reserve[]
-}
-
-model Period {
-  id          Int    @id @default(autoincrement())
-  name        String
-  initialHour String
-  endHour     String
-
-  Schedule Schedule[]
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "sqlite"
+  url = "***"
+}
+
+model User {
+  id         Int    @id @default(autoincrement())
+  enrollment String @unique
+  email      String @unique
+  name       String
+
+  FriendUser1 Friend[] @relation("user1")
+  FriendUser2 Friend[] @relation("user2")
+
+  InviteSender   Invite[] @relation("sender")
+  InviteReceiver Invite[] @relation("receiver")
+
+  UserReserve UserReserve[]
+  Reserve     Reserve[]
+}
+
+model Friend {
+  id Int @id @default(autoincrement())
+
+  User1 User @relation("user1", fields: [userId1], references: [id])
+  User2 User @relation("user2", fields: [userId2], references: [id])
+
+  userId1 Int
+  userId2 Int
+}
+
+model Invite {
+  id     Int @id @default(autoincrement())
+  status Int
+
+  UserSender   User @relation("sender", fields: [senderId], references: [id])
+  UserReceiver User @relation("receiver", fields: [receiverId], references: [id])
+
+  senderId   Int
+  receiverId Int
+}
+
+model Reserve {
+  id   Int      @id @default(autoincrement())
+  name String?
+  date DateTime
+
+  Room     Room     @relation(fields: [roomId], references: [id])
+  Schedule Schedule @relation(fields: [scheduleId], references: [id])
+  Admin    User     @relation(fields: [adminId], references: [id])
+
+  adminId    Int
+  roomId     Int
+  scheduleId Int
+
+  UserReserve UserReserve[]
+}
+
+model UserReserve {
+  id Int @id @default(autoincrement())
+
+  User    User    @relation(fields: [userId], references: [id])
+  Reserve Reserve @relation(fields: [reserveId], references: [id])
+
+  userId    Int
+  reserveId Int
+}
+
+model Room {
+  id        Int     @id @default(autoincrement())
+  initials  String  @unique
+  available Boolean @default(true)
+
+  Reserve Reserve[]
+}
+
+model Schedule {
+  id          Int    @id @default(autoincrement())
+  initialHour String
+  endHour     String
+
+  Period   Period @relation(fields: [periodId], references: [id])
+  periodId Int
+
+  Reserve Reserve[]
+}
+
+model Period {
+  id          Int    @id @default(autoincrement())
+  name        String
+  initialHour String
+  endHour     String
+
+  Schedule Schedule[]
 }
```


