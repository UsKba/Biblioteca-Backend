# Migration `20201016152701-create-role`

This migration has been generated by DestroyeerU at 10/16/2020, 3:27:01 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Role" (
"id" SERIAL,"name" text  NOT NULL ,"slug" text  NOT NULL ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."UserReserve" ADD COLUMN "roleId" integer  NOT NULL ;

ALTER TABLE "public"."UserReserve" ADD FOREIGN KEY ("roleId")REFERENCES "public"."Role"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201007040434-columns-renamed..20201016152701-create-role
--- datamodel.dml
+++ datamodel.dml
@@ -3,28 +3,28 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model User {
-  id         Int    @default(autoincrement()) @id
+  id         Int    @id @default(autoincrement())
   enrollment String @unique
   email      String @unique
   name       String
-  UserReserve UserReserve[]
-
   FriendUser1 Friend[] @relation("user1")
   FriendUser2 Friend[] @relation("user2")
   InviteSender   Invite[] @relation("sender")
   InviteReceiver Invite[] @relation("receiver")
+
+  UserReserve UserReserve[]
 }
 model Friend {
-  id Int @default(autoincrement()) @id
+  id Int @id @default(autoincrement())
   User1 User @relation("user1", fields: [userId1], references: [id])
   User2 User @relation("user2", fields: [userId2], references: [id])
@@ -32,19 +32,26 @@
   userId2 Int
 }
 model Invite {
-  id Int @default(autoincrement()) @id
+  id Int @id @default(autoincrement())
   UserSender   User @relation("sender", fields: [senderId], references: [id])
   UserReceiver User @relation("receiver", fields: [receiverId], references: [id])
   senderId   Int
   receiverId Int
 }
+model Role {
+  id          Int           @id @default(autoincrement())
+  name        String
+  slug        String
+  UserReserve UserReserve[]
+}
+
 model Reserve {
-  id    Int @default(autoincrement()) @id
+  id    Int @id @default(autoincrement())
   day   Int
   month Int
   year  Int
@@ -57,27 +64,29 @@
   UserReserve UserReserve[]
 }
 model UserReserve {
-  id Int @default(autoincrement()) @id
+  id Int @id @default(autoincrement())
   User    User    @relation(fields: [userId], references: [id])
   Reserve Reserve @relation(fields: [reserveId], references: [id])
+  Role    Role    @relation(fields: [roleId], references: [id])
   userId    Int
   reserveId Int
+  roleId    Int
 }
 model Room {
-  id        Int     @default(autoincrement()) @id
+  id        Int     @id @default(autoincrement())
   initials  String  @unique
   available Boolean @default(true)
   Reserve Reserve[]
 }
 model Schedule {
-  id          Int    @default(autoincrement()) @id
+  id          Int    @id @default(autoincrement())
   initialHour String
   endHour     String
   Period   Period @relation(fields: [periodId], references: [id])
@@ -86,9 +95,9 @@
   Reserve Reserve[]
 }
 model Period {
-  id          Int    @default(autoincrement()) @id
+  id          Int    @id @default(autoincrement())
   name        String
   initialHour String
   endHour     String
```


